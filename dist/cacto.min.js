/*!
 * CactoJS - v1.3.3
 * Licensed under GPL-3.0
 */
function routes(t){var e=location.hash.replace("#","");if(!e.length)return redirect(initial_hash),!1;e=e.split("/")[0],$(".all-views").hide(),void 0===$.ctrl[e]?$.controller(e):$.ctrl[e].show(),current_page=e}function redirect(t){if(!loading){loading=!0;var e=location.hash.replace("#","");(t=t.replace("#",""))==e?routes():location.hash=t,loading=!1}}function controller(t,e){if("function"==typeof e){var i=new e;for(var n in i)"function"==typeof i[n]&&(i[n]=i[n].bind(i));$.ctrl[t]=i}else $.ctrl[t]=e;"function"==typeof $.ctrl[t].initialize&&$($.ctrl[t].initialize)}function initial(t){initial_hash=t}function argument(t){var e=location.hash.replace("#","").split("/");return void 0===e[t]?null:e[t]}function clone(t){return JSON.parse(JSON.stringify(t))}$.ctrl={};var current_page="",initial_hash="index",loading=!1;$.view=function(t,e){t=t.replace("#","").replace(".","/"),$.ajax({url:"cacto/views/"+t+".html",type:"GET",dataType:"html",success:function(t){$(".app").append(t)},error:function(){console.log("[$.view] caminho inválido")}}).done(e)},$.controller=function(t){var t=t.replace("#","").replace(".","/");$.ajax({url:"cacto/controllers/"+t+".js",type:"GET",dataType:"script",error:function(){console.error("[$.controller]["+t+"] caminho inválido")}})},$(function(){$(window).on("hashchange",routes),routes()});var localDB={db:"localDB",init:function(t){this.db=t,this.has()||this.clear()},has:function(){return null!=localStorage.getItem(this.db)},save:function(t){return localStorage.setItem(this.db,JSON.stringify(t)),!0},get:function(t){if(!this.has())return!1;var e=JSON.parse(localStorage.getItem(this.db));for(key in e)if(key==t)return e[key]},set:function(t,e){var i={};this.has()&&(i=JSON.parse(localStorage.getItem(this.db))),i[t]=e,localStorage.setItem(this.db,JSON.stringify(i))},clear:function(){localStorage.removeItem(this.db)},getObject:function(){return JSON.parse(localStorage.getItem(this.db))}};$.support.cors=!0;var serverUrl="/";$.each(["put","delete","post","get"],function(t,e){$[e]=function(t,i,n,a){for(var r=serverUrl+t;r.indexOf("//")>=0;)r=r.replace(/\/\//gi,"/");return $.ajax({url:r,type:e,dataType:"json",crossDomain:!0,data:i,success:n,error:a})}}),$.fn.send=function(t,e){$(this).submit(function(i){return i.preventDefault(),!!$(this).validation()&&($.post($(this).attr("action"),$(this).serialize(),t,e).done(function(){}),!1)})},$.fn.sendImage=function(t,e){$(this).submit(function(){return $.dialog.waiting("Enviando..."),$.ajax({type:"POST",url:serverUrl+$(this).attr("action"),data:new FormData(this),enctype:"multipart/form-data",processData:!1,contentType:!1}).success(t).fail(e).done(function(){$(".dialog-waiting").length&&$.dialog.close()}),!1}),$(this).find('input[type="file"]').change(function(){for(var t=$(this).val(),e=[/.png$/,/.jpg$/,/.jpge$/],i=0;i<e.length;i++)if(t.search(e[i])>0)return void $(this).closest("form").submit();console.log("Arquivo inválido!")})},$.fn.serializeObject=function(){var t={},e=this.serializeArray();return $.each(e,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},$.fn.validation=function(){var t=$(this).find("input, select");$(t).removeClass("invalid"),$(".callback").hide();for(var e=0;e<$(t).length;e++){var i=$(t).eq(e).attr("regex");if(i&&i.length&&$(t).eq(e).is(":enabled")){var n=$(t).eq(e).is(":radio")||$(t).eq(e).is(":checkbox")?$(this).find("input:"+$(t).eq(e).attr("type")).filter("[name='"+$(t).eq(e).attr("name")+"']").filter(":checked").val():$(t).eq(e).val();if(n=n||"",!new RegExp(i,"i").exec(n))return $(t).eq(e).closest(".form-group").find(".callback").show(),$(t).eq(e).addClass("invalid").focus(),!1}}return!0};